# Low-cost-INS-unit-development-project
# ローコスト外付け自律航法ユニット開発プロジェクト

**イントロダクション**

・4年ほど前に車を買い替えた際、カーナビとしてAndroidヘッドユニット(俗に中華ナビ)を選択しました。  
・Androidヘッドユニットは安価で地図の更新料もかからず気に入ったのですが、国産ナビでは普通に備わっている車速パルスの取り込み機能を持っておらず、当時のナビアプリ(Googleマップナビ)はGPSからのリアルタイムな情報だけで自車位置を決定していたため、ナビゲーション中にトンネルに入ると自車位置が変化しないという点に違和感を覚えました。  
・そこで自律航法ユニットを外付けしようと検索したところFURUNOのPT-G1がヒットしたのですが、価格がナビ本体よりも高価なことがわかったので購入することはあっさりとあきらめ、自作でどこまでの性能が出せるかにトライすることにしました。  
・考え方としては、GPS正常受信時にGPSデータで安価なジャイロを校正して、GPSロスト時に自律航法に切り替えるというものです。  
・自律航法の手法を検索すると行列式やカルマンフィルタが出てきますが、私の頭では理解不能だったので高校の物理と数学レベルで組んでいます。専門家が見たら噴飯ものだとは思いますが、これはそんなレベルでもここまではできたよ、という記録でもあります。  
  
・今回当初設定した目標性能が達成できたので備忘録としてこの資料をまとめました。開発時にネットからいろいろ情報を得たことへの感謝を込めて、素人なりに今まで積み上げてきた成果として公開することにしました。内容は以下の通りです。技術に興味のある方への参考になればうれしく思います。  
　　①自律航法ユニット本体の開発時のメモ＆ハードウェア＆ソフトウェア  
　　②開発の手法とツール  
　　③Android側の受信アプリ＆ログ表示アプリのソースと実行形式  

Note：このプロジェクトでは自律航法の略語をINS(Inertial Navigation System )としています。  
　　　　またAndroid側で位置情報を差し替える（位置偽装する）ことをMock（モック）すると表現しています。  

現在(2022年8月時点)のいくつかのナビアプリはGPS信号をロストした時の車速が継続しているものとして自車位置が更新されるようになっています。よってトンネル内で渋滞したり分岐を間違えたりしなければ何事もなく経路案内が継続されるため、このような自律航法へのニーズは以前ほど高くはないものと思われます。  
参考までに自律航法なしで実走した結果はこちら→Log/Log2022_0513_100733圏央道八王子西ICまでの長いトンネル(Mockなし).mp4

**詳細はこちらのファイルをご覧ください→#ローコスト外付け自律航法ユニット開発プロジェクト.pdf**  
以下は上記pdfファイルからの抜粋です。  
　  
  
**公開したディレクトリ＆ファイル構成**
![01コンテンツ](https://user-images.githubusercontent.com/81674805/184339035-e3d76dbe-e7d4-460a-9c5b-b59635948c37.jpg)
  
![02目標](https://user-images.githubusercontent.com/81674805/184339597-d9283ad4-5e9b-42e0-ab40-6337199cb3e2.jpg)
  
![03結果](https://user-images.githubusercontent.com/81674805/184339889-bda8eb66-869b-4ddf-b52c-21481995c064.jpg)
  
![04結果](https://user-images.githubusercontent.com/81674805/184340655-957fb467-c8a1-41bd-8e34-7c1b6e3aade5.jpg)
  
![05システム構成](https://user-images.githubusercontent.com/81674805/184340342-53a392a0-0c28-4fe8-b659-d862a94acad1.jpg)
  
![06回路図](https://user-images.githubusercontent.com/81674805/184340963-58d3279f-851c-48bd-ac64-37bfbd96dfe3.jpg)
  
